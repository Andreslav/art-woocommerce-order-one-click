jQuery(function(f){if(typeof wc_add_to_cart_params==="undefined"){return false}if(typeof awooc_scripts==="undefined"){return false}const o=f(".awooc-custom-order.button"),e=f(".awooc-form-custom-order-title"),g=f(".awooc-form-custom-order-img"),b=f(".awooc-form-custom-order-price"),a=f(".awooc-form-custom-order-qty"),n=f(".awooc-form-custom-order-sku"),l=f(".awooc-form-custom-order-attr"),k='<div class="cssload-container"><div class="cssload-speeding-wheel"></div></div>';let selectedProduct;f(document).on("hide_variation",function(p){o.addClass("disabled wc-variation-selection-needed")}).on("show_variation",function(q,p){if(false!==p.is_in_stock){o.removeClass("disabled wc-variation-selection-needed")}else{o.addClass("disabled wc-variation-is-unavailable")}if(awooc_scripts.mode==="no_stock_no_price"){if(false===p.is_purchasable||false===p.is_in_stock){o.removeClass("disabled wc-variation-selection-needed");f("body.woocommerce").find(".single_variation").hide();f("body.woocommerce").find(".quantity").hide();f("body.woocommerce").find(".woocommerce-variation-add-to-cart .single_add_to_cart_button").hide()}}}).on("click",".awooc-custom-order.button",function(p){if(f(this).is(".disabled")){p.preventDefault();if(f(this).is(".wc-variation-is-unavailable")){window.alert(wc_add_to_cart_variation_params.i18n_unavailable_text)}else{if(f(this).is(".wc-variation-selection-needed")){window.alert(wc_add_to_cart_variation_params.i18n_make_a_selection_text)}}return false}let prodictSelectedId,productVariantId=f(".variations_form").find('input[name="variation_id"]').val(),productId=f(this).attr("data-value-product-id"),productQty=f(".quantity").find('input[name="quantity"]').val(),dataOut={};if(0!==productVariantId&&typeof productVariantId!=="undefined"){prodictSelectedId=productVariantId}else{prodictSelectedId=productId}let data={id:prodictSelectedId,action:"awooc_ajax_product_form",nonce:awooc_scripts.nonce};let request=f.ajax({url:awooc_scripts.url,data:data,type:"POST",dataType:"json",beforeSend:function(r,q){f(p.currentTarget).block({message:null,overlayCSS:{opacity:0.6}});f(p.currentTarget).fadeIn(200).prepend(k)},success:function(q){f(p.currentTarget).unblock();f(p.currentTarget).find(".cssload-container").remove();f(".awooc-close").attr("title",awooc_scripts.title_close);dataOut={outID:"ID: "+prodictSelectedId,outTitle:q.title===false?"":"\n"+awooc_scripts.product_title+q.title,outAttr:q.attr===false?"":"\n"+q.attr,outPrice:q.price===false?"":"\n"+awooc_scripts.product_price+q.pricenumber,outSku:q.sku===false?"":"\n"+q.sku,outCat:q.cat===false?"":"\n"+q.cat,outLink:q.link===false?"":"\n"+q.link,outQty:q.qty===false?"":"\n"+awooc_scripts.product_qty+productQty};e.text(q.title);g.html(q.image);b.html(q.price);b.after(q.qty);a.text(awooc_scripts.product_qty+productQty);n.html(q.sku);l.html(q.attr);f(".awooc-col.columns-right").html(q.form);m();let hiddenData=i(dataOut);f(".awooc-hidden-data").val(hiddenData);f(".awooc-hidden-product-id").val(prodictSelectedId);f(".awooc-hidden-product-qty").val(productQty);c();h();selectedProduct={productId:prodictSelectedId,productName:q.title,productSku:q.productSku,productQty:productQty,productPrice:q.pricenumber,productCat:q.productCat,productAttr:q.productAttr};f(document.body).trigger("awooc_popup_open_trigger",[q]);return q}});return false}).on("click",".awooc-close",function(){f.unblockUI();f("#awooc-form-custom-order").addClass("awooc-hide")}).on("wpcf7mailsent",function(p){f(document.body).trigger("awooc_mail_sent_trigger",{selectedProduct:selectedProduct,mailDetail:p});setTimeout(f.unblockUI,3000);setTimeout(function(){f(".wpcf7-form")[0].reset();f(".wpcf7-response-output").remove()},3000)}).on("wpcf7invalid",function(q,p){f(document.body).trigger("awooc_mail_invalid_trigger",[q,p]);setTimeout(function(){f(".wpcf7-response-output").remove();f(".wpcf7-not-valid-tip").remove()},5000)});function m(){f("div.wpcf7 > form").each(function(){let $form=f(this);wpcf7.initForm($form);if(wpcf7.cached){wpcf7.refill($form)}})}function i(p){return"\n"+awooc_scripts.product_data_title+"\n &mdash;&mdash;&mdash;"+p.outTitle+"\n"+p.outID+p.outCat.replace(/(<([^>]+)>)/ig,"")+p.outPrice+p.outAttr.replace(/(<([^>]+)>)/ig,"")+p.outSku.replace(/(<([^>]+)>)/ig,"")+p.outQty+p.outLink}function h(){f.blockUI({message:f("#awooc-form-custom-order"),css:{width:"100%",maxWidth:"600px",maxHeight:"600px",top:"50%",left:"50%",border:"4px",borderRadius:"4px",cursor:"default",overflowY:"auto",boxShadow:"0px 0px 3px 0px rgba(0, 0, 0, 0.2)",zIndex:"1000000",transform:"translate(-50%, -50%)"},overlayCSS:{zIndex:"1000000",backgroundColor:"#000",opacity:0.6,cursor:"wait"},bindEvents:true,timeout:0,fadeIn:awooc_scripts.fadeIn,fadeOut:awooc_scripts.fadeOut,allowBodyStretch:true,centerX:true,centerY:true,onBlock:function(){f("#awooc-form-custom-order").removeClass("awooc-hide")},onUnblock:function(){f("#awooc-form-custom-order").addClass("awooc-hide");j();f(document.body).trigger("awooc_popup_close_trigger")},onOverlayClick:function(){f("#awooc-form-custom-order").addClass("awooc-hide");f("html").css({overflow:"initial"});f.unblockUI();j()}})}function j(){e.empty();g.empty();b.empty();a.empty();n.empty();l.empty()}function d(){let $this=f(this),data_mask=$this.data("mask");try{$this.mask(data_mask);if(data_mask.indexOf("*")===-1&&data_mask.indexOf("a")===-1){$this.attr({inputmode:"numeric"})}}catch(p){console.log("Ошибка "+p.name+":"+p.message+"\n"+p.stack)}}function c(){let mask_fields=f(".wpcf7-mask");if(mask_fields.length>0){mask_fields.each(d())}}});